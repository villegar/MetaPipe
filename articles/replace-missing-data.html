<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Replace Missing Data • MetaPipe</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Replace Missing Data">
<meta property="og:description" content="MetaPipe">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MetaPipe</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/load-raw-data.html">Load raw data</a>
    </li>
    <li>
      <a href="../articles/replace-missing-data.html">Replace Missing Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/villegar/MetaPipe/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="replace-missing-data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Replace Missing Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/villegar/MetaPipe/blob/master/vignettes/replace-missing-data.Rmd"><code>vignettes/replace-missing-data.Rmd</code></a></small>
      <div class="hidden name"><code>replace-missing-data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">MetaPipe</span>)</pre></body></html></div>
<p><code>MetaPipe</code> can handle with missing data in a couple of ways:</p>
<ol style="list-style-type: decimal">
<li>Drop traits which exceed an NA proportion threshold (50% by default)</li>
<li>Replace NAs by half of the minimum value within each trait</li>
</ol>
<div id="function-call" class="section level2">
<h2 class="hasAnchor">
<a href="#function-call" class="anchor"></a>Function call</h2>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/replace_missing.html">replace_missing</a></span>(<span class="kw">raw_data</span> <span class="kw">=</span> <span class="no">example_data</span>,
                <span class="kw">excluded_columns</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>),
                <span class="co"># Optional</span>
                <span class="kw">out_prefix</span> <span class="kw">=</span> <span class="st">"metapipe"</span>,
                <span class="kw">prop_na</span> <span class="kw">=</span> <span class="fl">0.5</span>,
                <span class="kw">replace_na</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<p>where <code>raw_data</code> is a data frame containing the raw data, as described in <a href="load-raw-data.html">Load Raw Data</a> and <code>excluded_columns</code> is a vector containing the indices of the properties, e.g. <code><a href="https://rdrr.io/r/base/c.html">c(2, 3, ..., M)</a></code>. The other arguments are optional, <code>out_prefix</code> is the prefix for output files, <code>prop_na</code> is the proportion of NA values (used to drop traits), and <code>replace_na</code> is a logical flag to indicate whether or not NAs should be replace by half of the minimum value.</p>
</div>
<div id="drop-traits" class="section level2">
<h2 class="hasAnchor">
<a href="#drop-traits" class="anchor"></a>Drop traits</h2>
<p>By default the pipeline will drop traits that exceed an NA proportion threshold, this can be fine tuned by the user with the parameter <code>prop_na</code>. It is important to keep in mind the side effects of excluding variables from the QTL mapping, like making wrong conclusions regarding the most significant QTLs.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">123</span>)
<span class="no">example_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">ID</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">5</span>,
                           <span class="kw">P1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>, <span class="st">"four"</span>, <span class="st">"five"</span>),
                           <span class="kw">T1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">5</span>),
                           <span class="kw">T2</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">5</span>),
                           <span class="kw">T3</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">4</span>)),                     <span class="co">#  20 % NAs</span>
                           <span class="kw">T4</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fl">1.2</span>, -<span class="fl">0.5</span>, <span class="fl">NA</span>, <span class="fl">0.87</span>),          <span class="co">#  40 % NAs</span>
                           <span class="kw">T5</span> <span class="kw">=</span> <span class="fl">NA</span>)                                  <span class="co"># 100 % NAs</span>

<span class="co"># Default parameters: NA proportion = 50%</span>
<span class="fu"><a href="../reference/replace_missing.html">replace_missing</a></span>(<span class="no">example_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>))
<span class="co">#&gt; The following traits were dropped because they have 50% or more missing values: </span>
<span class="co">#&gt; T5</span>
<span class="co">#&gt;   ID    P1          T1         T2        T3    T4</span>
<span class="co">#&gt; 1  1   one -0.56047565  1.7150650        NA    NA</span>
<span class="co">#&gt; 2  2   two -0.23017749  0.4609162 1.2240818  1.20</span>
<span class="co">#&gt; 3  3 three  1.55870831 -1.2650612 0.3598138 -0.50</span>
<span class="co">#&gt; 4  4  four  0.07050839 -0.6868529 0.4007715    NA</span>
<span class="co">#&gt; 5  5  five  0.12928774 -0.4456620 0.1106827  0.87</span>

<span class="co"># NA proportion = 30%</span>
<span class="fu"><a href="../reference/replace_missing.html">replace_missing</a></span>(<span class="no">example_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>), <span class="kw">prop_na</span> <span class="kw">=</span> <span class="fl">0.3</span>)
<span class="co">#&gt; The following traits were dropped because they have 30% or more missing values: </span>
<span class="co">#&gt; T4, T5</span>
<span class="co">#&gt;   ID    P1          T1         T2        T3</span>
<span class="co">#&gt; 1  1   one -0.56047565  1.7150650        NA</span>
<span class="co">#&gt; 2  2   two -0.23017749  0.4609162 1.2240818</span>
<span class="co">#&gt; 3  3 three  1.55870831 -1.2650612 0.3598138</span>
<span class="co">#&gt; 4  4  four  0.07050839 -0.6868529 0.4007715</span>
<span class="co">#&gt; 5  5  five  0.12928774 -0.4456620 0.1106827</span></pre></body></html></div>
</div>
<div id="replace-nas" class="section level2">
<h2 class="hasAnchor">
<a href="#replace-nas" class="anchor"></a>Replace NAs</h2>
<p>Alternatively, the user can indicate whether or not NA values should be replaced by finding the minimum value for each trait and dividing it by two. This result can be achieved by passing the parameter <code>replace_na = TRUE</code>. Users should be cautious when using this approach, as the replacement of data points can have side effects that might lead to the wrong conclusions.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="fl">123</span>)
<span class="no">example_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">ID</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">5</span>,
                           <span class="kw">P1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>, <span class="st">"four"</span>, <span class="st">"five"</span>),
                           <span class="kw">T1</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">5</span>),
                           <span class="kw">T2</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">5</span>),
                           <span class="kw">T3</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">4</span>)),                     <span class="co">#  20 % NAs</span>
                           <span class="kw">T4</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">NA</span>, <span class="fl">1.2</span>, -<span class="fl">0.5</span>, <span class="fl">NA</span>, <span class="fl">0.87</span>),          <span class="co">#  40 % NAs</span>
                           <span class="kw">T5</span> <span class="kw">=</span> <span class="fl">NA</span>)                                  <span class="co"># 100 % NAs</span>

<span class="co"># Default parameters: NA proportion = 50%</span>
<span class="fu"><a href="../reference/replace_missing.html">replace_missing</a></span>(<span class="no">example_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>), <span class="kw">replace_na</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; The following traits were dropped because they have 100% missing values: </span>
<span class="co">#&gt; T5</span>
<span class="co">#&gt;   ID    P1          T1         T2         T3    T4</span>
<span class="co">#&gt; 1  1   one -0.56047565  1.7150650 0.05534136 -0.25</span>
<span class="co">#&gt; 2  2   two -0.23017749  0.4609162 1.22408180  1.20</span>
<span class="co">#&gt; 3  3 three  1.55870831 -1.2650612 0.35981383 -0.50</span>
<span class="co">#&gt; 4  4  four  0.07050839 -0.6868529 0.40077145 -0.25</span>
<span class="co">#&gt; 5  5  five  0.12928774 -0.4456620 0.11068272  0.87</span>

<span class="co"># NA proportion = 30%</span>
<span class="fu"><a href="../reference/replace_missing.html">replace_missing</a></span>(<span class="no">example_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>), <span class="kw">prop_na</span> <span class="kw">=</span> <span class="fl">0.3</span>, <span class="kw">replace_na</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt; The following traits were dropped because they have 100% missing values: </span>
<span class="co">#&gt; T5</span>
<span class="co">#&gt;   ID    P1          T1         T2         T3    T4</span>
<span class="co">#&gt; 1  1   one -0.56047565  1.7150650 0.05534136 -0.25</span>
<span class="co">#&gt; 2  2   two -0.23017749  0.4609162 1.22408180  1.20</span>
<span class="co">#&gt; 3  3 three  1.55870831 -1.2650612 0.35981383 -0.50</span>
<span class="co">#&gt; 4  4  four  0.07050839 -0.6868529 0.40077145 -0.25</span>
<span class="co">#&gt; 5  5  five  0.12928774 -0.4456620 0.11068272  0.87</span></pre></body></html></div>
<p>From the last example can be seen that <code>prop_na</code> and <code>replace_na</code> are mutually exclusive, and <code>replace_na</code> has precedence over <code>prop_na</code>.</p>
<p>Next, see <a href="assess-normality.html">Assess Normality</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Roberto Villegas-Diaz, Dilmini Alahakoon.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
